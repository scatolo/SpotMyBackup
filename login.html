<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Login Window</title>
	<script type="text/javascript" src="config.json"></script>
	<script type='text/javascript'>//<![CDATA[ 

		var conf = config;

		window.onload = function () {
			var target = window.self === window.top ? window.opener : window.parent;
			var search = window.location.search;
			if (search) {
				var params = {};
				search.substring(1).split('&').forEach(function (part) {
					var keyVal = part.split('=');
					if (keyVal.length === 2) {
						params[keyVal[0]] = decodeURIComponent(keyVal[1]);
					}
				});
				var code = params.code;
				if (code) {
					target.postMessage({ type: 'code', code: code }, conf.uri);
				} else if (params.error) {
					target.postMessage({ type: 'error', error: params.error }, conf.uri);
				}
			}
		}
	</script>
</head>

<body>

</body>

</html>
